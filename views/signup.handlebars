
<div class="main">
    <div class="form-container">
        <form action="/signup" method="post">
            <h1>SignUp</h1>
            <input type="hidden" name="event" id="eventIn" readonly value={{event}}>
            <label for="name">User Name</label><br>
            <input type="text" name="name" id="userIn" autocomplete="off" required><br><p class="warning" id="userWar"></p><br>
            <label for="email">Email</label><br>
            <input type="email" name="email" required><br><br>
            <label for="pass">Password</label><br>
            <input type="password" name="pass" required><br><br>
            <label for="mobile">Mobile Number</label><br>
            <input type="text" name="mobile" required><br><br>
            <input type="hidden" name="committee" readonly value="{{committee}}">
            <input type="submit" name="submit" value="Signup" id="submit" style="max-width:90px;font-size: 100%;" class="button">
        </form>
    </div>
</div>
<script type="text/javascript">
    var eventIn = document.getElementById('eventIn');
    var userIn = document.getElementById('userIn');
    userIn.addEventListener("keyup",(event) => {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("userWar").innerHTML = this.responseText;
                if(this.responseText!=''){
                    document.getElementById('submit').disabled = true;
                }
                else{
                    document.getElementById('submit').disabled = false;
                }
            }
        };
        xhttp.open("GET", "/userName/?u="+userIn.value+"&e="+eventIn.value, true);
        xhttp.send();
    });
</script>